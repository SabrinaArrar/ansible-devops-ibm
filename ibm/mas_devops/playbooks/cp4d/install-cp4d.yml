---
- hosts: localhost
  any_errors_fatal: true
  vars:
    cpd_registry: cp.icr.io
    cpd_registry_user: cp
    cpd_registry_password: "{{ lookup('env', 'CPD_ENTITLEMENT_KEY') }}"
    #can choose cpd namespace for version 3.5, for cpd 4.0, it will always install in 'ibm-common-services' namespace
    cpd_meta_namespace: "{{ lookup('env', 'CPD_NAMESPACE') | default('cpd-meta-ops', true) }}" 
    cpd_version: "{{ lookup('env', 'CPD_NAMESPACE')"
    # CP4D service configuration
    cpd_storage_class: "{{ lookup('env', 'CPD_STORAGE_CLASS') }}"
    cpd_block_storage_class: "{{ lookup('env', 'CPD_BLOCK_STORAGE_CLASS') }}"
    cpd_services:
      - db2wh
      # - wsl         # Required by Predict & HP Utilities
      # - wml         # Required by Predict
      # - spark       # Required by Predict

  roles:
    - ibm.mas_devops.cp4d_install
    - ibm.mas_devops.cp4d_install_services
