---
- hosts: localhost
  any_errors_fatal: true


# 7. Install & Configure IoT application
# -----------------------------------------------------------------------------
- name: Install IoT
  import_playbook: mas/install-app.yml
  vars:
    mas_app_id: iot

    mas_app_catalog_source: ibm-mas-iot-operator-catalog
    artifactory_username: "{{ lookup('env', 'W3_USERNAME') | lower }}"
    artifactory_apikey: "{{ lookup('env', 'ARTIFACTORY_APIKEY') }}"
    mas_app_channel: initial-gen2

    # MAS configuration - IBM container registry configuration
    mas_icr_cp: 'wiotp-docker-local.artifactory.swg-devops.com'

    # MAS configuration - Entitlement
    mas_entitlement_username: "{{ lookup('env', 'W3_USERNAME') }}"
    mas_entitlement_key: "{{ lookup('env', 'ARTIFACTORY_APIKEY') }}"


# Note that this sample playbook is always assuming a workspace ID of masdev,
# this can easily be modified when creating your own playbooks.
#- name: Configure Manage
#  import_playbook: mas/configure-app.yml
#  vars:
#    mas_app_id: iot
#    mas_workspace_id: masdev
