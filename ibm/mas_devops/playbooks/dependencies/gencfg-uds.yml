---
- hosts: localhost
  any_errors_fatal: true
  vars:
    UDS_TLS_CERT_LOCAL_FILE: "{{ lookup('env', 'UDS_TLS_CERT_LOCAL_FILE_PATH') }}"
    uds_tls_crt: "{{ lookup('file', UDS_TLS_CERT_LOCAL_FILE) | regex_findall('(-----BEGIN .+?-----(?s).+?-----END .+?-----)', multiline=True, ignorecase=True) }}"
    uds_endpoint_url: "{{ lookup('env', 'UDS_ENDPOINT_URL') }}"
    uds_api_key: "{{ lookup('env', 'UDS_API_KEY') }}"
  roles:
    - ibm.mas_devops.gencfg_uds
