---
- hosts: localhost
  any_errors_fatal: true
  vars:
    # MAS configuration
    mas_instance_id: "{{ lookup('env', 'MAS_INSTANCE_ID') }}"

    # MAS workspace configuration
    mas_workspace_id: "{{ lookup('env', 'MAS_WORKSPACE_ID') }}"

    # Manage Type Name 
    manage_app_type_name: "{{ lookup('env', 'MANAGE_APP_TYPE_NAME') | default('all', true) }}"

    # Prometheus
    prometheus_storage_class: "{{ lookup('env', 'PROMETHEUS_STORAGE_CLASS') }}"
    prometheus_storage_size: "{{ lookup('env', 'PROMETHEUS_STORAGE_SIZE') }}"
    prometheus_retention_period: "{{ lookup('env', 'PROMETHEUS_RETENTION_PERIOD') | default('90d',true)}}"

    # Alertmgr
    prometheus_alertmgr_storage_class: "{{ lookup('env', 'PROMETHEUS_ALERTMGR_STORAGE_CLASS') }}"
    prometheus_alertmgr_storage_size: "{{ lookup('env', 'PROMETHEUS_ALERTMGR_STORAGE_SIZE') }}"

  roles:
    - ibm.mas_devops.manage_mmi_monitoring_configure