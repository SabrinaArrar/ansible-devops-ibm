---
# Configure Db2 instance
# -----------------------------------------------------------------------------------------------------------------
db2wh_instance_name: "{{ lookup('env', 'DB2WH_INSTANCE_NAME') }}" # e.g. db2w-iot or db2w-manage
db2wh_dbname: "{{ lookup('env', 'DB2WH_VERSION') | default('BLUDB', true) }}"
db2wh_version: "{{ lookup('env', 'DB2WH_VERSION') | default('11.5.6.0-cn3', true) }}"
db2wh_table_org: "{{ lookup('env', 'DB2WH_TABLE_ORG') | default('ROW', true) }}" # e.g ROW or COLUMN

# Configure meta storage for db2 (CP4D v3.5 and v4.0)
db2wh_meta_storage_class: "{{ lookup('env', 'DB2WH_META_STORAGE_CLASS') }}"
db2wh_meta_storage_size_gb: "{{ lookup('env', 'DB2WH_META_STORAGE_SIZE_GB') | default(20, true) }}"

# Configure CP4D user storage (CP4D v3.5 and v4.0)
db2wh_user_storage_class: "{{ lookup('env', 'DB2WH_USER_STORAGE_CLASS') }}"
db2wh_user_storage_size_gb: "{{ lookup('env', 'DB2WH_USER_STORAGE_SIZE_GB') | default(100, true) }}"

# Configure CP4D backup storage (CP4D v3.5 and v4.0)
db2wh_backup_storage_class: "{{ lookup('env', 'DB2WH_BACKUP_STORAGE_CLASS') }}"
db2wh_backup_storage_size_gb: "{{ lookup('env', 'DB2WH_BACKUP_STORAGE_SIZE_GB') | default(100, true) }}"

# Configure CP4D transaction logs storage (CP4D v4.0 only)
db2wh_logs_storage_class: "{{ lookup('env', 'DB2WH_LOGS_STORAGE_CLASS') }}"
db2wh_logs_storage_size_gb: "{{ lookup('env', 'DB2WH_LOGS_STORAGE_SIZE_GB') | default(100, true) }}"

# Configure CP4D temporary storage (CP4D v4.0 only)
db2wh_temp_storage_class: "{{ lookup('env', 'DB2WH_TEMP_STORAGE_CLASS') }}"
db2wh_temp_storage_size_gb: "{{ lookup('env', 'DB2WH_TEMP_STORAGE_SIZE_GB') | default(100, true) }}"

# TODO: Clean up what these are used for, and the way that - for cpd40 we completely ignore db2wh_admin_username provided and overwrite it
db2wh_admin_username: "{{ lookup('env', 'DB2WH_ADMIN_USER')  | default('admin', true) }}"
db2wh_admin_password: "{{ lookup('env', 'DB2WH_ADMIN_PASSWORD')  | default('password', true) }}"


# MAS JdbcCfg generation settings
# -----------------------------------------------------------------------------------------------------------------
mas_instance_id: "{{ lookup('env', 'MAS_INSTANCE_ID') }}"
mas_config_dir: "{{ lookup('env', 'MAS_CONFIG_DIR') }}"

mas_config_scope: "{{ lookup('env', 'MAS_CONFIG_SCOPE') | default('system', true) }}" # Supported values are "system", "ws", "app", or "wsapp"
mas_workspace_id: "{{ lookup('env', 'MAS_WORKSPACE_ID') }}" # Necessary for ws and wsapp scopes
mas_application_id: "{{ lookup('env', 'MAS_APP_ID') }}" # Necessary for app and wsapp scopes


# CP4D V3.5 specific defaults
# -----------------------------------------------------------------------------------------------------------------
# A temporary workaround for a bug in CP4D DB2, details in story 1372 & 1472, to be removed once the bug is fixed in CP4D (4.x version)
apply_db2u_sts_patch: true

# Default name for ConfigMap created by this automation role inside CP4D namespace
cp4d_db_config_configmap_name: mas-automation-config


# CP4D V4.0 specific defaults
# -----------------------------------------------------------------------------------------------------------------
db2wh_cpu_limits: 6100m # default: 6.1 CPUs
db2wh_memory_limits: 18Gi # default: 18.0 GiB
