---
# If HP Utilities is being installed, then we automatically define the appconnect version to the installed
# If HP Utilities is not being installed, then we lookup appconnect version properties from env vars
# but if none are provided then by default we always install latest AppConnect version supported in MAS
mas_app_id: "{{ lookup('env', 'MAS_APP_ID') }}"
mas_app_channel: "{{ lookup('env', 'MAS_APP_CHANNEL') }}"
hpu_default_channel: '8.6.x'
appconnect_defaults: # Based on HP Utilities version
  8.6.x:
    channel: v6.2
    license_id: L-APEH-CFZE47
    dashboard_name: dashboard-12060r1
    dashboard_version: 12.0.6.0-r1
  8.5.x:
    channel: v6.0
    license_id: L-APEH-CCHL5W
    dashboard_name: dashboard-12050r2
    dashboard_version: 12.0.5.0-r2
  8.4.x:
    channel: v5.2
    license_id: L-APEH-C9NCK6
    dashboard_name: dashboard-12040r2
    dashboard_version: 12.0.4.0-r2

# Define where AppConnect will be installed, the default values below will always install latest/first index of `appconnect_defaults`
appconnect_namespace: "{{ lookup('env', 'APPCONNECT_NAMESPACE') | default('ibm-app-connect', true) }}"
appconnect_channel: "{{ lookup('env', 'APPCONNECT_CHANNEL') | default(appconnect_defaults[hpu_default_channel].channel, true) }}"
appconnect_dashboard_name: "{{ lookup('env', 'APPCONNECT_DASHBOARD_NAME') | default(appconnect_defaults[hpu_default_channel].dashboard_name, true) }}"
appconnect_dashboard_version: "{{ lookup('env', 'APPCONNECT_DASHBOARD_VERSION') | default(appconnect_defaults[hpu_default_channel].dashboard_version, true) }}"
appconnect_license_id: "{{ lookup('env', 'APPCONNECT_LICENSE_ID') | default(appconnect_defaults[hpu_default_channel].license_id, true) }}"
appconnect_storage_class: "{{ lookup('env', 'APPCONNECT_STORAGE_CLASS') }}"

# IBM entitlement key for AppConnect
# Default to re-using the IBM entitlement key if we do not provide a specific one for AppConnect
appconnect_entitlement_username: "{{ lookup('env', 'APPCONNECT_ENTITLEMENT_USERNAME') | default('cp', true) }}"
appconnect_entitlement_key: "{{ lookup('env', 'APPCONNECT_ENTITLEMENT_KEY') | default(lookup('env', 'IBM_ENTITLEMENT_KEY'), true) }}"
appconnect_registry: cp.icr.io

# MAS Configuration
mas_instance_id: "{{ lookup('env', 'MAS_INSTANCE_ID') }}"
mas_config_dir: "{{ lookup('env', 'MAS_CONFIG_DIR') }}"

# Custom Labels
custom_labels: "{{ lookup('env', 'CUSTOM_LABELS') | default(None, true) | string | ibm.mas_devops.string2dict() }}"
