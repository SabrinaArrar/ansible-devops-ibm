---
# 1. Install CP4D
# -----------------------------------------------------------------------------
- name: Assert CP4D_ACTION values
  assert:
    that: cp4d_action in ["install", "uninstall", "skip"]
    fail_msg: "Incorrect value set for CP4D_ACTION"
  when: cp4d_action is defined and (cp4d_action | length > 0)

- name: Default to install
  set_var:
    cp4d_action = "install"
  when:
    cp4d_action is not defined

- name: {{cp4d_action}} cp4d
  include_tasks: "tasks/{{ cp4d_action }}/main.yml"
  when:
    - cp4d_action in ["install", "uninstall"]
