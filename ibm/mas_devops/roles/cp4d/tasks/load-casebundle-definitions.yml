---
- include_vars:
    file: "{{ role_path }}/../mirror_extras_prepare/vars/cp4d_{{ cpd_product_version }}.yml"

- name: Retrieve image setting parts for cpd-platform catalog
  when: 
    - item.catalog_name is defined
    - item.catalog_name == 'cpd-platform'
  set_fact:
    cpd_platform_catalog_name: "{{ item.catalog_name }}"
    cpd_platform_catalog_display_name: "{{ item.catalog_display_name }}"
    cpd_platform_catalog_operator_name: "{{ item.name }}"
    cpd_platform_digest: "{{ item.digest }}"
    cpd_platform_registry: "{{ item.registry }}"
  loop: "{{ extra_images }}"

- name: Retrieve image setting parts for opencloud catalog
  when: 
    - item.catalog_name is defined
    - item.catalog_name == 'opencloud-operators'
  set_fact:
    opencloud_catalog_name: "{{ item.catalog_name }}"
    opencloud_catalog_display_name: "{{ item.catalog_display_name }}"
    opencloud_catalog_operator_name: "{{ item.name }}"
    opencloud_digest: "{{ item.digest }}"
    opencloud_registry: "{{ item.registry }}"
  loop: "{{ extra_images }}"

# 3. Debug Properties
# -----------------------------------------------------------------------------
- name: "Debug Cloud Pak for Data version {{ cpd_product_version }} extra casebundle properties"
  debug:
    msg:
      - "cpd-platform catalog name ............................ {{ cpd_platform_catalog_name}}"
      - "cpd-platform catalog display name .................... {{ cpd_platform_catalog_display_name }}"
      - "cpd-platform catalog operator name ................... {{ cpd_platform_catalog_operator_name }}"
      - "cpd-platform catalog digest .......................... {{ cpd_platform_digest }}"
      - "cpd-platform catalog registry ........................ {{ cpd_platform_registry }}"
      - "opencloud-operators catalog name ..................... {{ opencloud_catalog_name }}"
      - "opencloud-operators catalog display name ............. {{ opencloud_catalog_display_name }}"
      - "opencloud-operators catalog operator name ............ {{ opencloud_catalog_operator_name }}"
      - "opencloud-operators catalog digest ................... {{ opencloud_digest }}"
      - "opencloud-operators catalog registry ................. {{ opencloud_registry }}"

- name: "Debug Cloud Pak for Data version {{ cpd_product_version }} extra casebundle image properties"
  debug:
    msg:
      - "cpd-platform image ................................... {{ cpd_platform_registry }}/{{ cpd_platform_catalog_operator_name }}@{{ cpd_platform_digest }}"
      - "opencloud-operators image ............................ {{ opencloud_registry }}/{{ opencloud_catalog_operator_name }}@{{ opencloud_digest }}"
