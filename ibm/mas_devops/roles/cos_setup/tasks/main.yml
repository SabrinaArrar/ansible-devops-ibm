---

# 1. Check for undefined properties that do not have a default
# ---------------------------------------------------------------------------------------------------------------------
- name: "Fail if mas_instance_id is not provided"
  when: mas_instance_id is not defined or mas_instance_id == ""
  fail:
    msg: "mas_instance_id property is required"

- name: "Fail if mas_config_dir is not provided"
  when: mas_config_dir is not defined or mas_config_dir == ""
  fail:
    msg: "mas_config_dir property is required"

- name: "Fail if ibm_cloud_apikey is not provided"
  when:
    - ibm_cloud_apikey is not defined or ibm_cloud_apikey == ""
    - useibmcos is defined and useibmcos
  fail:
    msg: "ibm_cloud_apikey property is required"

- name: "Fail if ibm_cloud_org is not provided"
  when:
    - ibm_cloud_org is not defined or ibm_cloud_org == ""
    - useibmcos is defined and useibmcos
  fail:
    msg: "ibm_cloud_org property is required"

- name: "Fail if ibm_cloud_space is not provided"
  when:
    - ibm_cloud_space is not defined or ibm_cloud_space == ""
    - useibmcos is defined and useibmcos
  fail:
    msg: "ibm_cloud_space property is required"


# 1. Configure COS using IBM Cloud Object Storage (ibmcos) or OpenShift Container Storage (ocs)
# ---------------------------------------------------------------------------------------------------------------------
- name: "Run the task for the appropriate provider"
  include_tasks: tasks/providers/{{ cos_type }}.yml
