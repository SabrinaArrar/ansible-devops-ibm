---
- name: Fail if vpc_action is not defined
  assert:
    that:
      - vpc_action is defined and vpc_action != ''
    fail_msg: "property vpc_action is required"

- name: Fail if vpc_cidr is not defined
  assert:
    that:
      - vpc_cidr is defined and vpc_cidr != ''
    fail_msg: "property vpc_cidr is required"

- name: Fail if vpc_name is not defined
  assert:
    that:
      - vpc_name is defined and vpc_name != ''
    fail_msg: "property vpc_name is required"

- name: Create AWS VPC 
  when: vpc_action == 'provision'
  include_tasks: provision.yml

- name: Delete AWS VPC 
  when: vpc_action == 'deprovision'
  include_tasks: deprovision.yml
