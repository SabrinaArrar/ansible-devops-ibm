- name: "Debug information"
  debug:
    msg:
      - "Event Streams Name ...... {{ eventstreams_name }}"
      - "Region .............................. {{ ibmcloud_region }}"
      - "Plan ...................... {{ eventstreams_plan }}"
      - "Retention(ms) ...................... {{ eventstreams_retention }}"

- name: Fetch IBM eventstreams Information
  ibm.cloudcollection.ibm_resource_instance_info:
    name: "{{ eventstreams_name }}"
    service: "{{ eventstreams_service }}"
    location: "{{ eventstreams_location }}"
    ibmcloud_api_key: "{{ ibmcloud_apikey }}"
  register: es_exist_info

- name: Debug Information
  debug:
    msg:
      - "{{ es_exist_info }}"


# - name: Provision IBM eventstreams
#   ibm.cloudcollection.ibm_resource_instance:
#     name: "{{ eventstreams_name }}"
#     plan: "{{ eventstreams_plan }}"
#     service: "{{ eventstreams_service }}"
#     location: "{{ eventstreams_location }}"
#     ibmcloud_api_key: "{{ ibmcloud_apikey }}"
#     #resource_group_id: "{{ ibmcloud_resourcegroup }}"
#   register: es_info

# - name: print the output of terraform
#   debug:
#     msg:
#       - "ES Info {{ es_info }}"

# - name: Create k8s configmaps for eventstreams outputs
#   ansible.builtin.template:
#     src: eventstreams_tf_outputs_configmap.yaml.j2
#     dest: "{{ mas_config_dir }}/{{ eventstreams_configmap_name }}.yml"