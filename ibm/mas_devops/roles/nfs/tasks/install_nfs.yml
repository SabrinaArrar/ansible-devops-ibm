---
# 1. Obtain Private IP, if not provided, but Fyre credentials are
# -----------------------------------------------------------------------------
- include_tasks: get_private_ip.yml
  when: fyre_username is defined and fyre_username != "" and fyre_password is defined and fyre_password != ""

# 2. Delete Image Registry
# -----------------------------------------------------------------------------
- name: "Delete image registry"
  include_tasks: delete_image_registry.yml

# 3. Configure NFS
# -----------------------------------------------------------------------------
- name: "Configure NFS"
  include_tasks: configure_nfs.yml

# 4. Recreate Image Registry now configured for NFS
# -----------------------------------------------------------------------------
- name: "Recreate image registry now configured for NFS"
  include_tasks: create_image_registry.yml
