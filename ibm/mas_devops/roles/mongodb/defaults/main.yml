---
mongodb_action: "{{ lookup('env', 'MONGODB_ACTION') | default('install', true) }}"

# Currently, it's the only supported provider
mongodb_provider: "community"

# Which version of the MongoDb Community Edition operator to use
mongodb_ce_version: "{{ lookup('env', 'MONGODB_CE_VERSION') | default('0.7.0', true) }}"

# Where to install the operator and create the mongo instance
mongodb_namespace: "{{ lookup('env', 'MONGODB_NAMESPACE') | default('mongoce', True) }}"

# Storage configuration
mongodb_storage_class: "{{ lookup('env', 'MONGODB_STORAGE_CLASS') }}"
mongodb_storage_capacity_data: "{{ lookup('env', 'MONGODB_STORAGE_CAPACITY_DATA') | default('20Gi', True) }}"
mongodb_storage_capacity_logs: "{{ lookup('env', 'MONGODB_STORAGE_CAPACITY_LOGS') | default('20Gi', True) }}"

# CPU and memory limits configuration on the mongodb container
mongodb_cpu_limits: "{{ lookup('env', 'MONGODB_CPU_LIMITS') | default('1', true) }}"
mongodb_mem_limits: "{{ lookup('env', 'MONGODB_MEM_LIMITS') | default('1Gi', true) }}"

# CPU and memory request configuration on the mongodb container
mongodb_cpu_requests: "{{ lookup('env', 'MONGODB_CPU_REQUESTS') | default('500m', true) }}"
mongodb_mem_requests: "{{ lookup('env', 'MONGODB_MEM_REQUESTS') | default('1Gi', true) }}"

# When these are defined we will generate a MAS MongoCfg template
mas_instance_id: "{{ lookup('env', 'MAS_INSTANCE_ID') }}"
mas_config_dir: "{{ lookup('env', 'MAS_CONFIG_DIR') }}"

# MongoDB Replicas
mongodb_replicas: "{{ lookup('env', 'MONGODB_REPLICAS') | default(3,True) }}"

# Custom Labels
custom_labels: "{{ lookup('env', 'CUSTOM_LABELS') | default(None, true) | string | ibm.mas_devops.string2dict() }}"
