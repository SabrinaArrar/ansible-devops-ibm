<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/roles/ocp_provision/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>ocp_provision - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "ocp_provision";
        var mkdocs_page_input_path = "roles/ocp_provision.md";
        var mkdocs_page_url = "/ansible-devops/roles/ocp_provision/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/ocp/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/cp4d/">Install Cloud Pak For Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-core/">Install Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-iot/">Add IoT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-manage/">Add Manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-monitor/">Add Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-optimizer/">Add Optimizer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-predict/">Add Predict</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-visualinspection/">Add Visual Inspection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-update/">Update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-upgrade/">Upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/uninstall-core/">Uninstall Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/backup-restore/">Backup & Restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: OCP Mgmt</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_cluster_monitoring/">ocp_cluster_monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_config/">ocp_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_efs/">ocp_efs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_github_oauth/">ocp_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_node_config/">ocp_node_config</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">ocp_provision</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#role-variables">Role Variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cluster_type">cluster_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cluster_name">cluster_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ocp_version">ocp_version</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-gpu-node-support">Role Variables - GPU Node Support</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ocp_provision_gpu">ocp_provision_gpu</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gpu_workerpool_name">gpu_workerpool_name</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gpu_workers">gpu_workers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#compute_node_count">compute_node_count</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#controlplane_node_count">controlplane_node_count</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#gpu_workerpool_name_1">gpu_workerpool_name</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-roks">Role Variables - ROKS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ibmcloud_apikey">ibmcloud_apikey</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ibmcloud_endpoint">ibmcloud_endpoint</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ibmcloud_resourcegroup">ibmcloud_resourcegroup</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#roks_zone">roks_zone</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#roks_flavor">roks_flavor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#roks_workers">roks_workers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#roks_flags">roks_flags</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-rosa">Role Variables - ROSA</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#rosa_token">rosa_token</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rosa_cluster_admin_password">rosa_cluster_admin_password</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rosa_compute_nodes">rosa_compute_nodes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rosa_compute_machine_type">rosa_compute_machine_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#rosa_config_dir">rosa_config_dir</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-fyre">Role Variables - FYRE</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_username">fyre_username</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_apikey">fyre_apikey</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_quota_type">fyre_quota_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_product_id">fyre_product_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_site">fyre_site</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_cluster_description">fyre_cluster_description</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ocp_fips_enabled">ocp_fips_enabled</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_cluster_size">fyre_cluster_size</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_worker_count">fyre_worker_count</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_worker_cpu">fyre_worker_cpu</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#fyre_worker_memory">fyre_worker_memory</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#enable_ipv6">enable_ipv6</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-ipi">Role Variables - IPI</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_platform">ipi_platform</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_region">ipi_region</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_base_domain">ipi_base_domain</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_pull_secret_file">ipi_pull_secret_file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_dir">ipi_dir</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#sshkey">sshKey</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_controlplane_type">ipi_controlplane_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_controlplane_replicas">ipi_controlplane_replicas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_compute_type">ipi_compute_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_compute_replicas">ipi_compute_replicas</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_rootvolume_size">ipi_rootvolume_size</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-aws">Role Variables - AWS</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#aws_access_key_id">aws_access_key_id</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#aws_secret_access_key">aws_secret_access_key</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#role-variables-gcp">Role Variables - GCP</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#gcp_service_account_file">gcp_service_account_file</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ipi_gcp_projectid">ipi_gcp_projectid</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-playbook">Example Playbook</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#license">License</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_roks_upgrade_registry_storage/">ocp_roks_upgrade_registry_storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_upgrade/">ocp_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_verify/">ocp_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Dependency Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../appconnect/">appconnect</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_bucket_access_point/">aws_bucket_access_point</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_documentdb_user/">aws_documentdb_user</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_policy/">aws_policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_route53/">aws_route53</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_user_creation/">aws_user_creation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_vpc/">aws_vpc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cert_manager/">cert_manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cis/">cis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../common_services/">common-services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configure_manage_eventstreams/">configure_manage_eventstreams</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos/">cos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos_bucket/">cos_bucket</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_admin_pwd_update/">cp4d_admin_pwd_update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d/">cp4d</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_service/">cp4d_service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2/">db2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dro/">dro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../grafana/">grafana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ibm_catalogs/">ibm_catalogs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../kafka/">kafka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nvidia_gpu/">nvidia_gpu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocs/">ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sls/">sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../turbonomic/">turbonomic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uds/">uds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Image Mirroring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_case_prepare/">mirror_case_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_extras_prepare/">mirror_extras_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_images/">mirror_images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_ocp/">mirror_ocp</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_contentsourcepolicy/">ocp_contentsourcepolicy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_simulate_disconnected_network/">ocp_simulate_disconnected_network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../registry/">registry</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Suite Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_config/">suite_app_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_uninstall/">suite_app_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_upgrade/">suite_app_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_rollback/">suite_app_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_backup_restore/">suite_app_backup_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_certs/">suite_certs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_db2_setup_for_manage/">suite_db2_setup_for_manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_attachments_config/">suite_manage_attachments_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_birt_report_config/">suite_manage_birt_report_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_bim_config/">suite_manage_bim_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_customer_files_config/">suite_manage_customer_files_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_import_certs_config/">suite_manage_import_certs_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_load_dbc_scripts/">suite_manage_load_dbc_scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_logging_config/">suite_manage_logging_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_pvc_config/">suite_manage_pvc_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_uninstall/">suite_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_upgrade/">suite_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_rollback/">suite_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_verify/">suite_verify</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_backup_restore/">suite_backup_restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../entitlement_key_rotation/">entitlement_key_rotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_watsonstudio/">gencfg_watsonstudio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_operator/">install_operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_mongo/">gencfg_mongo</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Roles: OCP Mgmt</li>
      <li class="breadcrumb-item active">ocp_provision</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/roles/ocp_provision.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ocp_provision">ocp_provision<a class="headerlink" href="#ocp_provision" title="Permanent link"></a></h1>
<p>Provision OCP cluster on DevIT Fyre, IBM Cloud ROKS or ROSA.</p>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link"></a></h2>
<h3 id="cluster_type">cluster_type<a class="headerlink" href="#cluster_type" title="Permanent link"></a></h3>
<p>Required.  Specify the cluster type, supported values are <code>fyre</code>, <code>roks</code>, <code>rosa</code>, and <code>ipi</code>.</p>
<ul>
<li>Environment Variable: <code>CLUSTER_TYPE</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="cluster_name">cluster_name<a class="headerlink" href="#cluster_name" title="Permanent link"></a></h3>
<p>Required.  Specify the name of the cluster</p>
<ul>
<li>Environment Variable: <code>CLUSTER_NAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ocp_version">ocp_version<a class="headerlink" href="#ocp_version" title="Permanent link"></a></h3>
<p>Required.  Specify the version of OCP to install.  The exact format of this will vary depending on <code>cluster_type</code>.  For ROKS clusters the format is <code>4.6_openshift</code>, <code>4.8_openshift</code>, for Fyre it is <code>4.6.16</code>.</p>
<ul>
<li>Environment Variable: <code>OCP_VERSION</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="role-variables-gpu-node-support">Role Variables - GPU Node Support<a class="headerlink" href="#role-variables-gpu-node-support" title="Permanent link"></a></h2>
<h3 id="ocp_provision_gpu">ocp_provision_gpu<a class="headerlink" href="#ocp_provision_gpu" title="Permanent link"></a></h3>
<p>Flag that determines if GPU worker nodes should be added during cluster creation (eg. needed for MVI application). This is currently only set up for ROKS clusters.</p>
<ul>
<li>Environment Variable: <code>OCP_PROVISION_GPU</code></li>
<li>Default Value: <code>false</code></li>
</ul>
<h3 id="gpu_workerpool_name">gpu_workerpool_name<a class="headerlink" href="#gpu_workerpool_name" title="Permanent link"></a></h3>
<p>The name of the gpu worker pool to added to or modify in the cluster. If already existing, use the existing name to avoid recreating another gpu worker pool unless that is the goal.</p>
<ul>
<li>Environment Variable: <code>GPU_WORKERPOOL_NAME</code></li>
<li>Default Value: <code>gpu</code></li>
</ul>
<h3 id="gpu_workers">gpu_workers<a class="headerlink" href="#gpu_workers" title="Permanent link"></a></h3>
<p>The number of GPU worker nodes that will be deploy in the cluster. The node created will have mg4c.32x384.2xp100-GPU flavor. This variable depends on <code>ocp_provision_gpu</code> and is currently supported on ROKS clusters only.</p>
<ul>
<li>Environment Variable: <code>GPU_WORKERS</code></li>
<li>Default Value: <code>1</code></li>
</ul>
<h3 id="compute_node_count">compute_node_count<a class="headerlink" href="#compute_node_count" title="Permanent link"></a></h3>
<p>The number of compute nodes (i.e. worker nodes) allocate to the OCP cluster.</p>
<ul>
<li>Environment Variable: <code>COMPUTE_NODE_COUNT</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="controlplane_node_count">controlplane_node_count<a class="headerlink" href="#controlplane_node_count" title="Permanent link"></a></h3>
<p>The number of control plane nodes (i.e. master nodes) allocate to the OCP cluster.</p>
<ul>
<li>Environment Variable: <code>CONTROLPLANE_NODE_COUNT</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="gpu_workerpool_name_1">gpu_workerpool_name<a class="headerlink" href="#gpu_workerpool_name_1" title="Permanent link"></a></h3>
<p>The name of the gpu worker pool to added to or modify in the cluster. If already existing, use the existing name to avoid recreating another gpu worker pool unless that is the goal.</p>
<ul>
<li>Environment Variable: <code>GPU_WORKERPOOL_NAME</code></li>
<li>Default Value: <code>gpu</code></li>
</ul>
<h2 id="role-variables-roks">Role Variables - ROKS<a class="headerlink" href="#role-variables-roks" title="Permanent link"></a></h2>
<p>The following variables are only used when <code>cluster_type = roks</code>.</p>
<h3 id="ibmcloud_apikey">ibmcloud_apikey<a class="headerlink" href="#ibmcloud_apikey" title="Permanent link"></a></h3>
<p>Required if <code>cluster_type = roks</code>.  The APIKey to be used by ibmcloud login comand.</p>
<ul>
<li>Environment Variable: <code>IBMCLOUD_APIKEY</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ibmcloud_endpoint">ibmcloud_endpoint<a class="headerlink" href="#ibmcloud_endpoint" title="Permanent link"></a></h3>
<p>Override the default IBMCloud API endpoint.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>IBMCLOUD_ENDPOINT</code></li>
<li>Default Value: <code>https://cloud.ibm.com</code></li>
</ul>
<h3 id="ibmcloud_resourcegroup">ibmcloud_resourcegroup<a class="headerlink" href="#ibmcloud_resourcegroup" title="Permanent link"></a></h3>
<p>The resource group to create the cluster inside.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>IBMCLOUD_RESOURCEGROUP</code></li>
<li>Default Value: <code>Default</code></li>
</ul>
<h3 id="roks_zone">roks_zone<a class="headerlink" href="#roks_zone" title="Permanent link"></a></h3>
<p>IBM Cloud zone where the cluster should be provisioned.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROKS_ZONE</code></li>
<li>Default Value: <code>dal10</code></li>
</ul>
<h3 id="roks_flavor">roks_flavor<a class="headerlink" href="#roks_flavor" title="Permanent link"></a></h3>
<p>Worker node flavor</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROKS_FLAVOR</code></li>
<li>Default Value: <code>b3c.16x64.300gb</code></li>
</ul>
<h3 id="roks_workers">roks_workers<a class="headerlink" href="#roks_workers" title="Permanent link"></a></h3>
<p>Number of worker nodes for the roks cluster</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROKS_WORKERS</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="roks_flags">roks_flags<a class="headerlink" href="#roks_flags" title="Permanent link"></a></h3>
<p>Can be used to specify additional parameters for the cluster creation</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROKS_FLAGS</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="role-variables-rosa">Role Variables - ROSA<a class="headerlink" href="#role-variables-rosa" title="Permanent link"></a></h2>
<p>The following variables are only used when <code>cluster_type = rosa</code>.</p>
<h3 id="rosa_token">rosa_token<a class="headerlink" href="#rosa_token" title="Permanent link"></a></h3>
<p>Token to authenticate to the ROSA service.  To obtain your API token login to the <a href="https://console.redhat.com/openshift/token/rosa/show#">OpenShift cluster manager</a>.</p>
<ul>
<li><strong>Required</strong> if <code>cluster_type = rosa</code>.</li>
<li>Environment Variable: <code>ROSA_TOKEN</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="rosa_cluster_admin_password">rosa_cluster_admin_password<a class="headerlink" href="#rosa_cluster_admin_password" title="Permanent link"></a></h3>
<p>Password to set up for the <code>cluster-admin</code> user account on the OCP instance.  You will need this to log onto the cluster after it is provisioned. If this is not set then a password is auto-generated.</p>
<ul>
<li><strong>Optional</strong> if <code>cluster_type = rosa</code>.</li>
<li>Environment Variable: <code>ROSA_CLUSTER_ADMIN_PASSWORD</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="rosa_compute_nodes">rosa_compute_nodes<a class="headerlink" href="#rosa_compute_nodes" title="Permanent link"></a></h3>
<p>Number of compute nodes to deploy in the cluster.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROSA_COMPUTE_NODES</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="rosa_compute_machine_type">rosa_compute_machine_type<a class="headerlink" href="#rosa_compute_machine_type" title="Permanent link"></a></h3>
<p>Worker nodes machine</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROSA_COMPUTE_MACHINE_TYPE</code></li>
<li>Default Value: <code>m5.4xlarge</code></li>
</ul>
<h3 id="rosa_config_dir">rosa_config_dir<a class="headerlink" href="#rosa_config_dir" title="Permanent link"></a></h3>
<p>Config directory to hold the rosa-{{cluster_name}}-details.yaml file that contains the api endpoint and cluster-admin details</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>ROSA_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="role-variables-fyre">Role Variables - FYRE<a class="headerlink" href="#role-variables-fyre" title="Permanent link"></a></h2>
<p>The following variables are only used when <code>cluster_type = fyre</code>.</p>
<h3 id="fyre_username">fyre_username<a class="headerlink" href="#fyre_username" title="Permanent link"></a></h3>
<p>Username to authenticate with Fyre API.</p>
<ul>
<li><strong>Required</strong> if <code>cluster_type = fyre</code>.</li>
<li>Environment Variable: <code>FYRE_USERNAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="fyre_apikey">fyre_apikey<a class="headerlink" href="#fyre_apikey" title="Permanent link"></a></h3>
<p>API key to authenticate with Fyre API.</p>
<ul>
<li><strong>Required</strong> if <code>cluster_type = fyre</code>.</li>
<li>Environment Variable: <code>FYRE_APIKEY</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="fyre_quota_type">fyre_quota_type<a class="headerlink" href="#fyre_quota_type" title="Permanent link"></a></h3>
<p>Type of quota to draw from when provisioning the cluster, valid options are <code>quick_burn</code> and <code>product_group</code>.</p>
<ul>
<li><strong>Required</strong> if <code>cluster_type = fyre</code>.</li>
<li>Environment Variable: <code>FYRE_QUOTA_TYPE</code></li>
<li>Default Value: <code>quick_burn</code></li>
</ul>
<h3 id="fyre_product_id">fyre_product_id<a class="headerlink" href="#fyre_product_id" title="Permanent link"></a></h3>
<p>The Product ID that the cluster will be associated with for accounting purposes.</p>
<ul>
<li><strong>Required</strong> if <code>cluster_type = fyre</code>.</li>
<li>Environment Variable: <code>FYRE_PRODUCT_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="fyre_site">fyre_site<a class="headerlink" href="#fyre_site" title="Permanent link"></a></h3>
<p>Provide a site in Fyre where cluster will be provisioned</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>FYRE_SITE</code></li>
<li>Default Value: <code>svl</code></li>
</ul>
<h3 id="fyre_cluster_description">fyre_cluster_description<a class="headerlink" href="#fyre_cluster_description" title="Permanent link"></a></h3>
<p>Provide a description for the cluster.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>FYRE_CLUSTER_DESCRIPTION</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ocp_fips_enabled">ocp_fips_enabled<a class="headerlink" href="#ocp_fips_enabled" title="Permanent link"></a></h3>
<p>Set to true to provision a FIPS enabled cluster.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_FIPS_ENABLED</code></li>
<li>Default Value: <code>false</code></li>
</ul>
<h3 id="fyre_cluster_size">fyre_cluster_size<a class="headerlink" href="#fyre_cluster_size" title="Permanent link"></a></h3>
<p>The name of one of Fyre's pre-defined cluster sizes to use for the new cluster.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = fyre</code> and <code>fyre_quota_type = quick_burn</code>.</li>
<li>Environment Variable: <code>FYRE_CLUSTER_SIZE</code></li>
<li>Default Value: <code>large</code></li>
</ul>
<h3 id="fyre_worker_count">fyre_worker_count<a class="headerlink" href="#fyre_worker_count" title="Permanent link"></a></h3>
<p>The number of worker nodes to provision in the cluster.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = fyre</code> and <code>fyre_quota_type = quick_burn</code>.</li>
<li>Environment Variable: <code>FYRE_WORKER_COUNT</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="fyre_worker_cpu">fyre_worker_cpu<a class="headerlink" href="#fyre_worker_cpu" title="Permanent link"></a></h3>
<p>The amount of CPU to assign to each worker node (maximum value supported by FYRE 16).</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = fyre</code> and <code>fyre_quota_type = quick_burn</code>.</li>
<li>Environment Variable: <code>FYRE_WORKER_CPU</code></li>
<li>Default Value: <code>16</code></li>
</ul>
<h3 id="fyre_worker_memory">fyre_worker_memory<a class="headerlink" href="#fyre_worker_memory" title="Permanent link"></a></h3>
<p>The amount of memory to assign to each worker node (maximum value supported by FYRE 64).</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = fyre</code> and <code>fyre_quota_type = quick_burn</code>.</li>
<li>Environment Variable: <code>FYRE_WORKER_MEMORY</code></li>
<li>Default Value: <code>64</code></li>
</ul>
<h3 id="enable_ipv6">enable_ipv6<a class="headerlink" href="#enable_ipv6" title="Permanent link"></a></h3>
<p>Enable IPv6. This is for Fyre at RTP site only.</p>
<ul>
<li>Environment Variable: <code>ENABLE_IPV6</code></li>
<li>Default: False</li>
</ul>
<h2 id="role-variables-ipi">Role Variables - IPI<a class="headerlink" href="#role-variables-ipi" title="Permanent link"></a></h2>
<p>These variables are only used when <code>cluster_type = ipi</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IPI stands for <strong>Installer Provisioned Infrastructure</strong>.  OpenShift offers two possible deployment methods: IPI and UPI (User Provisioned Infrastructure). The difference is the degree of automation and customization. IPI will not only deploy OpenShift but also all infrastructure components and configurations.</p>
</div>
<h3 id="ipi_platform">ipi_platform<a class="headerlink" href="#ipi_platform" title="Permanent link"></a></h3>
<p>Platform to create the cluster on.  Technically, any platform supported by <code>openshift-install</code> should work here, but currently we have only specifically tested on <code>aws</code> and <code>gcp</code> , where <code>aws</code> is the default value.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_PLATFORM</code></li>
<li>Default Value: <code>aws</code></li>
</ul>
<h3 id="ipi_region">ipi_region<a class="headerlink" href="#ipi_region" title="Permanent link"></a></h3>
<p>Platform region where OCP cluster will be created.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_REGION</code></li>
<li>Default Value: <code>us-east-1</code></li>
</ul>
<h3 id="ipi_base_domain">ipi_base_domain<a class="headerlink" href="#ipi_base_domain" title="Permanent link"></a></h3>
<p>Specify the base domain of the cluster that will be provisioned.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_BASE_DOMAIN</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ipi_pull_secret_file">ipi_pull_secret_file<a class="headerlink" href="#ipi_pull_secret_file" title="Permanent link"></a></h3>
<p>Location of the file containing your Redhat OpenShift pull secret.  This file can be obtained from the <a href="https://console.redhat.com/openshift/install/metal/user-provisioned">Red Hat Hybrid Cloud Console</a></p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_PULL_SECRET_FILE</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ipi_dir">ipi_dir<a class="headerlink" href="#ipi_dir" title="Permanent link"></a></h3>
<p>The working directory that is used to perform the installation, it will contain the <code>openshift-install</code> executable, its configuration files, &amp; any generated logs.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_DIR</code></li>
<li>Default Value: <code>~/openshift-install</code></li>
</ul>
<h3 id="sshkey">sshKey<a class="headerlink" href="#sshkey" title="Permanent link"></a></h3>
<p>Public SSH key value. It will be set in the OCP cluster nodes.
Can be used to SSH into the OCP cluster nodes using a bastion.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>SSH_PUB_KEY</code></li>
</ul>
<h3 id="ipi_controlplane_type">ipi_controlplane_type<a class="headerlink" href="#ipi_controlplane_type" title="Permanent link"></a></h3>
<p>Control plane node type.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_CONTROLPLANE_TYPE</code></li>
<li>Default Value: <code>m5.4xlarge</code></li>
</ul>
<h3 id="ipi_controlplane_replicas">ipi_controlplane_replicas<a class="headerlink" href="#ipi_controlplane_replicas" title="Permanent link"></a></h3>
<p>The number of master nodes to provision to form the control plane of your cluster.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_CONTROLPLANE_REPLICAS</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="ipi_compute_type">ipi_compute_type<a class="headerlink" href="#ipi_compute_type" title="Permanent link"></a></h3>
<p>Compute node type.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_COMPUTE_TYPE</code></li>
<li>Default Value: <code>m5.4xlarge</code></li>
</ul>
<h3 id="ipi_compute_replicas">ipi_compute_replicas<a class="headerlink" href="#ipi_compute_replicas" title="Permanent link"></a></h3>
<p>The number of worker nodes to provsision in the cluster, providing your compute resource.</p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment Variable: <code>IPI_COMPUTE_REPLICAS</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="ipi_rootvolume_size">ipi_rootvolume_size<a class="headerlink" href="#ipi_rootvolume_size" title="Permanent link"></a></h3>
<p>The size of root volume in GiB. </p>
<ul>
<li>Optional when <code>cluster_type = ipi</code></li>
<li>Environment variable: <code>IPI_ROOTVOLUME_SIZE</code></li>
</ul>
<h2 id="role-variables-aws">Role Variables - AWS<a class="headerlink" href="#role-variables-aws" title="Permanent link"></a></h2>
<p>The following variables are only used when <code>cluster_type = ipi</code> and <code>ipi_platform = aws</code>.</p>
<h3 id="aws_access_key_id">aws_access_key_id<a class="headerlink" href="#aws_access_key_id" title="Permanent link"></a></h3>
<p>AWS access key associated with an IAM user or role. Make sure the access key has permissions to create instances.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = ipi</code> and <code>ipi_platform = aws</code></li>
<li>Environment Variable: <code>AWS_ACCESS_KEY_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_secret_access_key">aws_secret_access_key<a class="headerlink" href="#aws_secret_access_key" title="Permanent link"></a></h3>
<p>AWS secret access key associated with an IAM user or role.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = aws-ipi</code> and <code>ipi_platform = aws</code></li>
<li>Environment Variable: <code>AWS_SECRET_ACCESS_KEY</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="role-variables-gcp">Role Variables - GCP<a class="headerlink" href="#role-variables-gcp" title="Permanent link"></a></h2>
<p>The following variables are only used when <code>cluster_type = ipi</code> and <code>ipi_platform = gcp</code>.</p>
<h3 id="gcp_service_account_file">gcp_service_account_file<a class="headerlink" href="#gcp_service_account_file" title="Permanent link"></a></h3>
<p>GCP service account file path. Make sure the service account has permissions to create instances.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = ipi</code> and <code>ipi_platform = gcp</code></li>
<li>Environment Variable: <code>GOOGLE_APPLICATION_CREDENTIALS</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="ipi_gcp_projectid">ipi_gcp_projectid<a class="headerlink" href="#ipi_gcp_projectid" title="Permanent link"></a></h3>
<p>GCP project id in which the cluster will be deployed.</p>
<ul>
<li><strong>Required</strong> when <code>cluster_type = ipi</code> and <code>ipi_platform = gcp</code></li>
<li>Environment Variable: <code>GOOGLE_PROJECTID</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link"></a></h2>
<pre><code class="language-yaml">- hosts: localhost
  vars:
    cluster_type: roks
    cluster_name: mycluster
    ocp_version: 4.10

    ibmcloud_apikey: xxxxx
  roles:
    - ibm.mas_devops.ocp_provision
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link"></a></h2>
<p>EPL-2.0</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../ocp_node_config/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ocp_roks_upgrade_registry_storage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
