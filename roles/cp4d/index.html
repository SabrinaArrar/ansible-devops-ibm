<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/roles/cp4d/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>cp4d - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "cp4d";
        var mkdocs_page_input_path = "roles/cp4d.md";
        var mkdocs_page_url = "/ansible-devops/roles/cp4d/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/ocp/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/cp4d/">Install Cloud Pak For Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-core/">Install Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-iot/">Add IoT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-manage/">Add Manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-monitor/">Add Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-optimizer/">Add Optimizer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-predict/">Add Predict</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-visualinspection/">Add Visual Inspection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-update/">Update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/oneclick-upgrade/">Upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/uninstall-core/">Uninstall Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/backup-restore/">Backup & Restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: OCP Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_cluster_monitoring/">ocp_cluster_monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_config/">ocp_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_efs/">ocp_efs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_github_oauth/">ocp_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_node_config/">ocp_node_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_provision/">ocp_provision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_roks_upgrade_registry_storage/">ocp_roks_upgrade_registry_storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_upgrade/">ocp_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_verify/">ocp_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Dependency Mgmt</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../appconnect/">appconnect</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_bucket_access_point/">aws_bucket_access_point</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_documentdb_user/">aws_documentdb_user</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_policy/">aws_policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_route53/">aws_route53</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_user_creation/">aws_user_creation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../aws_vpc/">aws_vpc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cert_manager/">cert_manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cis/">cis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../common_services/">common-services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../configure_manage_eventstreams/">configure_manage_eventstreams</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos/">cos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos_bucket/">cos_bucket</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_admin_pwd_update/">cp4d_admin_pwd_update</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">cp4d</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_service/">cp4d_service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2/">db2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dro/">dro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../grafana/">grafana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ibm_catalogs/">ibm_catalogs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../kafka/">kafka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../nvidia_gpu/">nvidia_gpu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocs/">ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sls/">sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../turbonomic/">turbonomic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uds/">uds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Image Mirroring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_case_prepare/">mirror_case_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_extras_prepare/">mirror_extras_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_images/">mirror_images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirror_ocp/">mirror_ocp</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_contentsourcepolicy/">ocp_contentsourcepolicy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_simulate_disconnected_network/">ocp_simulate_disconnected_network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../registry/">registry</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Suite Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_config/">suite_app_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_uninstall/">suite_app_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_upgrade/">suite_app_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_rollback/">suite_app_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_backup_restore/">suite_app_backup_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_certs/">suite_certs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_db2_setup_for_manage/">suite_db2_setup_for_manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_attachments_config/">suite_manage_attachments_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_birt_report_config/">suite_manage_birt_report_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_bim_config/">suite_manage_bim_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_customer_files_config/">suite_manage_customer_files_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_import_certs_config/">suite_manage_import_certs_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_load_dbc_scripts/">suite_manage_load_dbc_scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_logging_config/">suite_manage_logging_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_manage_pvc_config/">suite_manage_pvc_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_uninstall/">suite_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_upgrade/">suite_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_rollback/">suite_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_verify/">suite_verify</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_backup_restore/">suite_backup_restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../entitlement_key_rotation/">entitlement_key_rotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_watsonstudio/">gencfg_watsonstudio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_operator/">install_operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_mongo/">gencfg_mongo</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Roles: Dependency Mgmt</li>
      <li class="breadcrumb-item active">cp4d</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/roles/cp4d.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cp4d">cp4d<a class="headerlink" href="#cp4d" title="Permanent link"></a></h1>
<p>This role installs or upgrades <a href="https://www.ibm.com/uk-en/products/cloud-pak-for-data">IBM Cloud Pak for Data</a> Operator in the target cluster.</p>
<p>Currently supported Cloud Pak for Data release versions are:</p>
<ul>
<li>4.6.0</li>
<li>4.6.3</li>
<li>4.6.4</li>
<li>4.6.6</li>
<li>4.8.0</li>
<li>5.0.0 (Install only, currently upgrade from 4.8 is not supported)</li>
</ul>
<p>The role will automatically install or upgrade (if targeted to an existing CPD deployment) the corresponding Zen version associated to the chosen Cloud Pak for Data release, for example:</p>
<ul>
<li>Cloud Pak for Data release version <code>4.6.0</code> installs Zen/Control Plane version <a href="https://github.ibm.com/PrivateCloud/olm-utils/blob/master/ansible-play/config-vars/release-4.6.0.yml#L65"><code>4.8.0</code></a>.</li>
<li>Cloud Pak for Data release version <code>4.6.3</code> installs Zen/Control Plane version <a href="https://github.ibm.com/PrivateCloud/olm-utils/blob/master/ansible-play/config-vars/release-4.6.3.yml#L65"><code>4.8.1</code></a>.</li>
<li>Cloud Pak for Data release version <code>4.6.4</code> installs Zen/Control Plane version <a href="https://github.ibm.com/PrivateCloud/olm-utils/blob/master/ansible-play/config-vars/release-4.6.4.yml#L65"><code>4.8.2</code></a>.</li>
<li>Cloud Pak for Data release version <code>4.6.6</code> installs Zen/Control Plane version <a href="https://github.ibm.com/PrivateCloud/olm-utils/blob/master/ansible-play/config-vars/release-4.6.4.yml#L65"><code>4.8.2</code></a>.</li>
<li>Cloud Pak for Data release version <code>4.8.0</code> installs Zen/Control Plane version <a href="https://github.ibm.com/PrivateCloud/olm-utils/blob/4.8.x/ansible-play/config-vars/release-4.8.0.yml"><code>5.1.0</code></a></li>
<li>Cloud Pak for Data release version <code>5.0.0</code> installs Zen/Control Plane version <code>6.0.1</code></li>
</ul>
<p>For more information about CPD versioning, see <a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.8.x?topic=planning-operator-operand-versions">IBM Cloud Pak for Data Operator and operand versions 4.9.x</a> or <a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/5.0.x?topic=planning-operator-operand-versions">IBM Cloud Pak for Data Operator and operand versions 5.0.x</a></p>
<h1 id="cloud-pak-for-data-version-mapping-to-mas-catalog">Cloud Pak for Data version mapping to MAS Catalog<a class="headerlink" href="#cloud-pak-for-data-version-mapping-to-mas-catalog" title="Permanent link"></a></h1>
<p>Introduced with 4.8.x support, users can still choose to install an specific version of Cloud Pak for Data by setting <code>CPD_PRODUCT_VERSION</code> variable. However, by default, now it will possible to install an specific version of Cloud Pak for Data that is compatible with an specific version of MAS catalog (ibm-operator-catalog).
If <code>CPD_PRODUCT_VERSION</code> variable is not defined, then the automation will try to find the installed MAS catalog (ibm-operator-catalog) in the target cluster, and lookup the corresponding default Cloud Pak for Data version that is mapped with the retrieved MAS catalog version. If still not able to find the MAS catalog, then by default, the Cloud Pak for Data version will be defined by the version supported by the latest released MAS catalog.</p>
<h2 id="upgrade">Upgrade<a class="headerlink" href="#upgrade" title="Permanent link"></a></h2>
<p>This role also supports seamlessly CPD control plane (or also called <code>Zen</code> service) minor version upgrades (CPD 4.6.x &gt; CPD 4.8.x), and patch version upgrades (i.e CPD 4.8.0 -&gt; CPD 4.8.1).
All you need to do is to define <code>cpd_product_version</code> variable to the version you target to upgrade and run this role against an existing CPD instance.</p>
<p>For more information about IBM Cloud Pak for Data upgrade process, refer to the <a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.8.x?topic=upgrading">Cloud Pak for Data official documentation</a>.</p>
<p>The role assumes that you have already installed the IBM Operator Catalog and configured IBM Cloud Pak Foundational services (only a must have if installing CPD 4.6.x) in the target cluster. These actions are performed by the <a href="../ibm_catalogs/">ibm_catalogs</a> <a href="../common_services/">common_services</a> roles in this collection.</p>
<p>Cloud Pak for Data will be configured as a <a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.8.x?topic=planning-architecture">specialized installation</a></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>A specialized installation allows a user with project administrator permissions to install the software after a cluster administrator completes the initial cluster setup.  A specialized installation also facilitates strict division between Red Hat OpenShift Container Platform projects (Kubernetes namespaces).</p>
<p>In a specialized installation, the IBM Cloud Pak foundational services operators are installed in the ibm-common-services project and the Cloud Pak for Data operators are installed in a separate project (typically cpd-operators). Each project has a dedicated:</p>
<ul>
<li>Operator group, which specifies the OwnNamespace installation mode</li>
<li>NamespaceScope Operator, which allows the operators in the project to manage operators and service workloads in specific projects</li>
</ul>
<p>In this way, you can specify different settings for the IBM Cloud Pak foundational services and for the Cloud Pak for Data operators.</p>
</div>
<h2 id="cloud-pak-for-data-deployment-details">Cloud Pak for Data deployment details<a class="headerlink" href="#cloud-pak-for-data-deployment-details" title="Permanent link"></a></h2>
<h3 id="48x-version">4.8.x version:<a class="headerlink" href="#48x-version" title="Permanent link"></a></h3>
<p>Cloud Pak for Data 4.8.x leverages Cloud Pak Foundational Services v4, which runs its deployments in isolated/dedicated scope model, that means that its dependencies will be grouped and installed within the Cloud Pak for Data related projects/namespaces. Differently from CPD 4.6.x, there are only two namespaces that will be used: CPD instance namespace (e.g <code>ibm-cpd</code>) and CPD operators namespace (e.g <code>ibm-cpd-operators</code>).</p>
<p>In the <strong>ibm-cpd-operators</strong> namespace:</p>
<pre><code class="language-bash">oc -n ibm-cpd-operators get deployments
NAME                                                   READY   UP-TO-DATE   AVAILABLE   AGE
cpd-platform-operator-manager                          1/1     1            1           39d
ibm-common-service-operator                            1/1     1            1           39d
ibm-commonui-operator                                  1/1     1            1           39d
ibm-iam-operator                                       1/1     1            1           39d
ibm-mongodb-operator                                   1/1     1            1           39d
ibm-namespace-scope-operator                           1/1     1            1           39d
ibm-zen-operator                                       1/1     1            1           39d
meta-api-deploy                                        1/1     1            1           39d
operand-deployment-lifecycle-manager                   1/1     1            1           39d
postgresql-operator-controller-manager-1-18-7          1/1     1            1           39d
</code></pre>
<p>In the <strong>ibm-cpd</strong> namespace:</p>
<pre><code>oc -n ibm-cpd get zenservice,ibmcpd,deployments,sts,pvc

NAME                                 STATUS      AGE
zenservice.zen.cpd.ibm.com/lite-cr  Completed   39d

NAME                           AGE
ibmcpd.cpd.ibm.com/ibmcpd-cr   39d

NAME                                                                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/common-web-ui                                           1/1     1            1           39d
deployment.apps/ibm-nginx                                               2/2     2            2           39d
deployment.apps/ibm-nginx-tester                                        1/1     1            1           39d
deployment.apps/platform-auth-service                                   1/1     1            1           39d
deployment.apps/platform-identity-management                            1/1     1            1           39d
deployment.apps/platform-identity-provider                              1/1     1            1           39d
deployment.apps/usermgmt                                                2/2     2            2           39d
deployment.apps/zen-audit                                               1/1     1            1           39d
deployment.apps/zen-core                                                2/2     2            2           39d
deployment.apps/zen-core-api                                            2/2     2            2           39d
deployment.apps/zen-watchdog                                            1/1     1            1           39d
deployment.apps/zen-watcher                                             1/1     1            1           39d

NAME                                                         READY   AGE
statefulset.apps/icp-mongodb                                 3/3     39d
statefulset.apps/zen-minio                                   3/3     39d

NAME                                                                     STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS                  AGE
persistentvolumeclaim/ibm-zen-cs-mongo-backup                            Bound    pvc-bdba4bb2-dff5-43cb-a4b6-3540955ccb92   20Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/ibm-zen-objectstore-backup-pvc                     Bound    pvc-46595a1b-2629-4c62-9e16-6b9553635738   20Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/mongodbdir-icp-mongodb-0                           Bound    pvc-1d3f7ee5-b2ef-4ca0-8b95-8db79bc88b19   20Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/mongodbdir-icp-mongodb-1                           Bound    pvc-9dada920-c6be-40f2-b4e2-56c989935a16   20Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/mongodbdir-icp-mongodb-2                           Bound    pvc-27713ee7-4d57-49e2-94ce-6955bbcd74f4   20Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/zen-metastore-edb-1                                Bound    pvc-34319e6e-ef9b-40cf-adf4-d70a1ab94321   10Gi       RWO            ocs-storagecluster-ceph-rbd   39d
persistentvolumeclaim/zen-metastore-edb-2                                Bound    pvc-d9a5c1f3-a423-44b0-a7af-601359cbc5cd   10Gi       RWO            ocs-storagecluster-ceph-rbd   39d
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can retrieve the Cloud Pak for Data password from the <strong>ibm-iam-bindinfo-platform-auth-idp-credentials</strong> secret: <code>oc -n ibm-cpd get secret ibm-iam-bindinfo-platform-auth-idp-credentials -o jsonpath="{.data.admin_password}" | base64 -d</code></p>
</div>
<h3 id="46x-version">4.6.x version:<a class="headerlink" href="#46x-version" title="Permanent link"></a></h3>
<p>Cloud Pak for Data 4.6.x is made up of many moving parts across multiple namespaces.</p>
<p>In the <strong>ibm-common-services</strong> namespace:</p>
<pre><code class="language-bash">oc -n ibm-common-services get deployments
NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE
cert-manager-cainjector                1/1     1            1           85m
cert-manager-controller                1/1     1            1           85m
cert-manager-webhook                   1/1     1            1           85m
configmap-watcher                      1/1     1            1           85m
ibm-cert-manager-operator              1/1     1            1           87m
ibm-common-service-operator            1/1     1            1           92m
ibm-common-service-webhook             1/1     1            1           91m
ibm-namespace-scope-operator           1/1     1            1           91m
ibm-zen-operator                       1/1     1            1           87m
meta-api-deploy                        1/1     1            1           86m
operand-deployment-lifecycle-manager   1/1     1            1           90m
secretshare                            1/1     1            1           91m
</code></pre>
<p>In the <strong>ibm-cpd-operators</strong> namespace:</p>
<pre><code class="language-bash">oc -n ibm-cpd-operators get deployments
NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
cpd-platform-operator-manager   1/1     1            1           87m
ibm-common-service-operator     1/1     1            1           87m
ibm-namespace-scope-operator    1/1     1            1           87m
</code></pre>
<p>In the <strong>ibm-cpd</strong> namespace:</p>
<pre><code>oc -n ibm-cpd get zenservice,ibmcpd,deployments,sts
NAME                                 AGE
zenservice.zen.cpd.ibm.com/lite-cr   81m

NAME                        AGE
ibmcpd.cpd.ibm.com/ibmcpd   85m

NAME                                READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/ibm-nginx           3/3     3            3           62m
deployment.apps/usermgmt            3/3     3            3           64m
deployment.apps/zen-audit           1/1     1            1           56m
deployment.apps/zen-core            3/3     3            3           55m
deployment.apps/zen-core-api        3/3     3            3           55m
deployment.apps/zen-data-sorcerer   2/2     2            2           48m
deployment.apps/zen-watchdog        1/1     1            1           48m
deployment.apps/zen-watcher         1/1     1            1           55m

NAME                               READY   AGE
statefulset.apps/dsx-influxdb      1/1     51m
statefulset.apps/zen-metastoredb   3/3     68m
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can retrieve the Cloud Pak for Data password from the <strong>admin-user-details</strong> secret: <code>oc -n ibm-cpd get secret admin-user-details -o jsonpath="{.data.initial_admin_password}" | base64 -d</code></p>
</div>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link"></a></h2>
<h3 id="cpd_product_version">cpd_product_version<a class="headerlink" href="#cpd_product_version" title="Permanent link"></a></h3>
<p>Defines the IBM Cloud Pak for Data release version to be installed.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>CPD_PRODUCT_VERSION</code></li>
<li>Default Value: Defined by the installed MAS catalog version</li>
</ul>
<h3 id="ibm_entitlement_key">ibm_entitlement_key<a class="headerlink" href="#ibm_entitlement_key" title="Permanent link"></a></h3>
<p>Provide your <a href="https://myibm.ibm.com/products-services/containerlibrary">IBM entitlement key</a>.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>IBM_ENTITLEMENT_KEY</code></li>
<li>Default: None</li>
</ul>
<h3 id="cpd_entitlement_key">cpd_entitlement_key<a class="headerlink" href="#cpd_entitlement_key" title="Permanent link"></a></h3>
<p>An IBM entitlement key specific for Cloud Pak for Data installation, primarily used to override <code>ibm_entitlement_key</code> in development.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_ENTITLEMENT_KEY</code></li>
<li>Default: None</li>
</ul>
<h3 id="cpd_primary_storage_class">cpd_primary_storage_class<a class="headerlink" href="#cpd_primary_storage_class" title="Permanent link"></a></h3>
<p>Primary storage class for Cloud Pak for Data.</p>
<ul>
<li><strong>Required</strong> if one of the known supported storage classes is not installed in the cluster.</li>
<li>Environment Variable: <code>CPD_PRIMARY_STORAGE_CLASS</code></li>
<li>Default Value: <code>ibmc-file-gold-gid</code>, <code>ocs-storagecluster-cephfs</code>, <code>azurefiles-premium</code> (if available)</li>
</ul>
<h3 id="cpd_metadata_storage_class">cpd_metadata_storage_class<a class="headerlink" href="#cpd_metadata_storage_class" title="Permanent link"></a></h3>
<p>Storage class for the Cloud Pak for Data Zen meta database.</p>
<ul>
<li><strong>Required</strong> if one of the known supported storage classes is not installed in the cluster.</li>
<li>Environment Variable: <code>CPD_METADATA_STORAGE_CLASS</code></li>
<li>Default Value: <code>ibmc-block-gold</code>, <code>ocs-storagecluster-ceph-rbd</code>, or <code>managed-premium</code> (if available)</li>
</ul>
<h3 id="cpd_operators_namespace">cpd_operators_namespace<a class="headerlink" href="#cpd_operators_namespace" title="Permanent link"></a></h3>
<p>Namespace where Cloud Pak for Data operators will be installed.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_OPERATORS_NAMESPACE</code></li>
<li>Default Value: <code>ibm-cpd-operators</code></li>
</ul>
<h3 id="cpd_instance_namespace">cpd_instance_namespace<a class="headerlink" href="#cpd_instance_namespace" title="Permanent link"></a></h3>
<p>Namespace that the Cloud Pak for Data operators will be configured to watch.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_INSTANCE_NAMESPACE</code></li>
<li>Default Value: <code>ibm-cpd</code></li>
</ul>
<h3 id="cpd_scale_config">cpd_scale_config<a class="headerlink" href="#cpd_scale_config" title="Permanent link"></a></h3>
<p>Adjust and scale the resources for your Cloud Pak for Data instance to increase processing capacity.
For more information, refer to <a href="https://www.ibm.com/docs/en/cloud-paks/cp-data/4.8.x?topic=services-manually-scaling#reference_mkn_x4g_wpb__control-plane-scale">Managing resources</a> in IBM Cloud Pak for Data documentation.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_SCALE_CONFIG</code></li>
<li>Default Value: <code>medium</code></li>
</ul>
<h3 id="cpd_admin_username">cpd_admin_username<a class="headerlink" href="#cpd_admin_username" title="Permanent link"></a></h3>
<p>The CP4D Admin username to authenticate with CP4D APIs. If you didn't change the initial admin username after installing CP4D then you don't need to provide this.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_ADMIN_USERNAME</code></li>
<li>Default Value: </li>
<li><code>admin</code> (CPD 4.6)</li>
<li><code>cpadmin</code> (CPD 4.8) </li>
</ul>
<h3 id="cpd_admin_password">cpd_admin_password<a class="headerlink" href="#cpd_admin_password" title="Permanent link"></a></h3>
<p>The CP4D Admin User password to call CP4D API to provision Discovery Instance. If you didn't change the initial admin password after CP4D install, you don't need to provide it.  The initial admin user password for <code>admin</code> or <code>cpdamin</code> will be used.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CPD_ADMIN_PASSWORD</code></li>
<li>Default Value: <ul>
<li>CPD 4.6: Looked up from the <code>admin-user-details</code> secret in the <code>cpd_instance_namespace</code> namespace</li>
<li>CPD 4.8: Looked up from the <code>ibm-iam-bindinfo-platform-auth-idp-credentials</code> secret in the <code>cpd_instance_namespace</code> namespace</li>
</ul>
</li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link"></a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    cpd_product_version: 5.0.0
    cpd_primary_storage_class: ibmc-file-gold-gid
    cpd_metadata_storage_class: ibmc-block-gold
  roles:
    - ibm.mas_devops.cp4d
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link"></a></h2>
<p>EPL-2.0</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../cp4d_admin_pwd_update/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cp4d_service/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
