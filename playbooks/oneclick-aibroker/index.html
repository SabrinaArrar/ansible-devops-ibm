<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/playbooks/oneclick-aibroker/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Install AI Broker Application - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Install AI Broker Application";
        var mkdocs_page_input_path = "playbooks/oneclick-aibroker.md";
        var mkdocs_page_url = "/ansible-devops/playbooks/oneclick-aibroker/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d/">Install Cloud Pak For Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-core/">Install Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-iot/">Add IoT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-manage/">Add Manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-monitor/">Add Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-optimizer/">Add Optimizer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-predict/">Add Predict</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-visualinspection/">Add Visual Inspection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-update/">Update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-upgrade/">Upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uninstall-core/">Uninstall Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backup-restore/">Backup & Restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: OCP Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_cluster_monitoring/">ocp_cluster_monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_config/">ocp_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_efs/">ocp_efs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_github_oauth/">ocp_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_node_config/">ocp_node_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_provision/">ocp_provision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_roks_upgrade_registry_storage/">ocp_roks_upgrade_registry_storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_upgrade/">ocp_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_verify/">ocp_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Dependency Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/appconnect/">appconnect</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_bucket_access_point/">aws_bucket_access_point</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_documentdb_user/">aws_documentdb_user</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_policy/">aws_policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_route53/">aws_route53</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_user_creation/">aws_user_creation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_vpc/">aws_vpc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cert_manager/">cert_manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cis/">cis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/common_services/">common-services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/configure_manage_eventstreams/">configure_manage_eventstreams</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cos/">cos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cos_bucket/">cos_bucket</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_admin_pwd_update/">cp4d_admin_pwd_update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d/">cp4d</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_service/">cp4d_service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/db2/">db2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/dro/">dro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/grafana/">grafana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ibm_catalogs/">ibm_catalogs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/kafka/">kafka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/nvidia_gpu/">nvidia_gpu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocs/">ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/sls/">sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/turbonomic/">turbonomic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/uds/">uds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Image Mirroring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_case_prepare/">mirror_case_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_extras_prepare/">mirror_extras_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_images/">mirror_images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_ocp/">mirror_ocp</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_contentsourcepolicy/">ocp_contentsourcepolicy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_simulate_disconnected_network/">ocp_simulate_disconnected_network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/registry/">registry</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Suite Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_config/">suite_app_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_uninstall/">suite_app_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_upgrade/">suite_app_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_rollback/">suite_app_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_backup_restore/">suite_app_backup_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_certs/">suite_certs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_db2_setup_for_manage/">suite_db2_setup_for_manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_attachments_config/">suite_manage_attachments_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_birt_report_config/">suite_manage_birt_report_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_bim_config/">suite_manage_bim_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_customer_files_config/">suite_manage_customer_files_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_import_certs_config/">suite_manage_import_certs_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_load_dbc_scripts/">suite_manage_load_dbc_scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_logging_config/">suite_manage_logging_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_pvc_config/">suite_manage_pvc_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_uninstall/">suite_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_upgrade/">suite_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_rollback/">suite_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_verify/">suite_verify</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_backup_restore/">suite_backup_restore</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/entitlement_key_rotation/">entitlement_key_rotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_watsonstudio/">gencfg_watsonstudio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/install_operator/">install_operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_mongo/">gencfg_mongo</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Install AI Broker Application</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/playbooks/oneclick-aibroker.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="install-ai-broker-application">Install AI Broker Application<a class="headerlink" href="#install-ai-broker-application" title="Permanent link"></a></h1>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"></a></h2>
<p>You will need a RedHat OpenShift v4.14 or above with IBM Maximo Application Suite Core v9.x already be installed, the <a href="../oneclick-core/">oneclick-core</a> playbook can be used to set this up.</p>
<h3 id="dependencies">Dependencies:<a class="headerlink" href="#dependencies" title="Permanent link"></a></h3>
<ul>
<li>Object Storage</li>
<li>Minio ( if customer does not want to use AWS S3 bucket)</li>
<li>AWS S3 ( if customer use AWS S3 bucket bucket)</li>
<li>MariaDB database (installed in cluster where aibroker instance)</li>
<li>IBM Maximo Application Suite Core v9.x</li>
</ul>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link"></a></h2>
<p>This playbook will add <strong>AI Broker v1.0.x</strong> to an existing IBM Maximo Application Suite Core installation.</p>
<p>This playbook can be ran against any OCP cluster regardless of its type; whether it's running in IBM Cloud, Azure, AWS, or your local datacenter.</p>
<ul>
<li>Install dependencies:</li>
<li>Install IBM Maximo Application Suite Core v9.x (~30 Minutes)</li>
<li>Install MariaDB (~5 minutes)</li>
<li>Install Minio (~5 minutes)</li>
<li>Install AI broker application (using playbook):</li>
<li>Install application (~10 Minutes)</li>
<li>Configure AI Broker (kmodels, tenant, etc) (~5 Minutes)</li>
</ul>
<p>All timings are estimates, see the individual pages for each of these playbooks for more information. Use this sample playbook as a starting point for installing application, just customize the application install and configure stages at the end of the playbook.</p>
<h2 id="storage-providers">Storage providers<a class="headerlink" href="#storage-providers" title="Permanent link"></a></h2>
<p><strong>Notice !!!</strong></p>
<p>AI Broker supports <strong>AWS</strong> and <strong>Minio</strong> storage providers.</p>
<h2 id="required-environment-variables">Required environment variables<a class="headerlink" href="#required-environment-variables" title="Permanent link"></a></h2>
<ul>
<li><code>MAS_INSTANCE_ID</code> Declare the instance ID for the AI Broker install</li>
<li><code>MAS_ENTITLEMENT_KEY</code> Your IBM Entitlement key to access the IBM Container Registry</li>
<li><code>MAS_ENTITLEMENT_USERNAME</code> Your IBM Entitlement user to access the IBM Container Registry</li>
<li><code>STORAGE_ACCESSKEY</code> Your strage provider access key</li>
<li><code>STORAGE_SECRETKEY</code> Your storage provider secret key</li>
<li><code>STORAGE_HOST</code> Your storage provider host</li>
<li><code>STORAGE_REGION</code> Your storage provider region - only when use AWS S3 instance</li>
<li><code>STORAGE_PROVIDER</code> Your storage provider name</li>
<li><code>STORAGE_SSL</code> Your storage ssl (true/false)</li>
<li><code>STORAGE_PIPELINES_BUCKET</code> Your piplines bucket</li>
<li><code>STORAGE_TENANTS_BUCKET</code> Your tenants bucket</li>
<li><code>STORAGE_TEMPLATES_BUCKET</code> Your templates bucket</li>
<li><code>WATSONXAI_APIKEY</code> You WatsonX AI api key</li>
<li><code>WATSONXAI_URL</code> You WatsonX AI url</li>
<li><code>WATSONXAI_PROJECT_ID</code> You WatsonX projedt Id</li>
<li><code>DB_HOST</code> Your database instance host</li>
<li><code>DB_PORT</code> Your database instance port</li>
<li><code>DB_USER</code> Your database instance user</li>
<li><code>DB_DATABASE</code> Your database instance datbase name</li>
<li><code>DB_SECRET_NAME</code> Your database instance secret name</li>
<li><code>DB_SECRET_VALUE</code> Your database instance password</li>
</ul>
<h2 id="optional-environment-variables">Optional environment variables<a class="headerlink" href="#optional-environment-variables" title="Permanent link"></a></h2>
<ul>
<li><code>MAS_AIBROKER_CHANNEL</code> Your custom AI broker application channel</li>
<li><code>MAS_ICR_CP</code> Provide custom registry for AI Broker applications</li>
<li><code>MAS_ICR_CPOPEN</code> Provide custom registry for AI Broker operator</li>
<li><code>MAS_CATALOG_VERSION</code> Your custom AI broker catalog version</li>
<li><code>ARTIFACTORY_USERNAME</code> Your artifactory user name to access - this is needed if user deploy from custom registry for example <code>docker-na-public.artifactory.swg-devops.com</code></li>
<li><code>ARTIFACTORY_TOKEN</code> Your artifactory token for user to access - this is needed if user deploy from custom registry for example <code>docker-na-public.artifactory.swg-devops.com</code></li>
<li><code>TENANT_ACTION</code> Whether to install or remove tenant (default value is: install)</li>
<li><code>APIKEY_ACTION</code> Whether to install or remove or update apikey (default value is: install)</li>
<li><code>WATSONX_ACTION</code> Whether to install or remove watsonx secret (default value is: install)</li>
<li><code>S3_ACTION</code> Whether to install or remove s3 (default value is: install)</li>
</ul>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link"></a></h2>
<h3 id="ai-broker-deployment-steps">AI broker deployment steps<a class="headerlink" href="#ai-broker-deployment-steps" title="Permanent link"></a></h3>
<h4 id="notice-for-s3-manage-please-make-sure-you-have-deployed-dependencies">Notice: For S3 manage please make sure you have deployed dependencies<a class="headerlink" href="#notice-for-s3-manage-please-make-sure-you-have-deployed-dependencies" title="Permanent link"></a></h4>
<h5 id="install-boto3-python-module-use-python-environment">install boto3 python module (use python environment)<a class="headerlink" href="#install-boto3-python-module-use-python-environment" title="Permanent link"></a></h5>
<pre><code>python3 -m venv /tmp/venv
source /tmp/venv/bin/activate
python3 -m pip install boto3
</code></pre>
<h4 id="run-playbooks-for-deploy-ai-broker-from-internal-registry-ex-docker-na-publicartifactoryswg-devopscom">Run playbooks for deploy AI Broker from internal registry ex. <code>docker-na-public.artifactory.swg-devops.com</code><a class="headerlink" href="#run-playbooks-for-deploy-ai-broker-from-internal-registry-ex-docker-na-publicartifactoryswg-devopscom" title="Permanent link"></a></h4>
<pre><code class="language-bash">export ARTIFACTORY_USERNAME=&quot;&lt;artifactory user&gt;&quot;
export ARTIFACTORY_TOKEN=&quot;&lt;artifactory token&gt;&quot;
export MAS_ICR_CP=&quot;&lt;internal redistry for aibroker applications&gt;&quot;
export MAS_ICR_CPOPEN=&quot;&lt;internal redistry for aibroker operator&gt;&quot;
export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export STORAGE_ACCESSKEY=&quot;&lt;storage provider access key&gt;&quot;
export STORAGE_SECRETKEY=&quot;&lt;storage provider secret key&gt;&quot;
export STORAGE_HOST=&quot;&lt;storage provider host&gt;&quot;
export STORAGE_SSL=&quot;true or false&quot;
export STORAGE_REGION=&quot;&lt;storage provider region - only for aws&gt;&quot;
export STORAGE_PROVIDER=&quot;&lt;storage provider name&gt;&quot;
export STORAGE_PORT=&quot;&lt;storage provider port - only for minio&gt;&quot;
export STORAGE_PIPELINES_BUCKET=&quot;&lt;pipelines bucket name&gt;&quot;
export STORAGE_TENANTS_BUCKET=&quot;&lt;tenants bucket name&gt;&quot;
export STORAGE_TEMPLATES_BUCKET=&quot;&lt;templates bucket name&gt;&quot;
export WATSONXAI_APIKEY=&quot;&lt;watsonx AI api key&gt;&quot;
export WATSONXAI_URL=&quot;&lt;watsonx AI learning url&gt;&quot;
export WATSONXAI_PROJECT_ID=&quot;&lt;watsonx AI project ID&gt;&quot;
export DB_HOST=&quot;&lt;database instance host&gt;&quot;
export DB_PORT=&quot;&lt;database instance port&gt;&quot;
export DB_USER=&quot;&lt;database instance user&gt;&quot;
export DB_DATABASE=&quot;&lt;database instance datbase name&gt;&quot;
export DB_SECRET_NAME=&quot;&lt;database instance secret name&gt;&quot;
export DB_SECRET_VALUE=&quot;&lt;database instance password&gt;&quot;

oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/oneclick_add_aibroker.yml
</code></pre>
<h4 id="run-playbooks-for-deploy-ai-broker-from-public-registry-ex-icrio">Run playbooks for deploy AI Broker from public registry ex. <code>icr.io</code><a class="headerlink" href="#run-playbooks-for-deploy-ai-broker-from-public-registry-ex-icrio" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_ENTITLEMENT_USERNAME=&quot;&lt;user&gt;&quot;
export MAS_ENTITLEMENT_KEY=&quot;&lt;token&gt;&quot;
export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export STORAGE_ACCESSKEY=&quot;&lt;storage provider access key&gt;&quot;
export STORAGE_SECRETKEY=&quot;&lt;storage provider secret key&gt;&quot;
export STORAGE_HOST=&quot;&lt;storage provider host&gt;&quot;
export STORAGE_SSL=&quot;true or false&quot;
export STORAGE_REGION=&quot;&lt;storage provider region - only for aws&gt;&quot;
export STORAGE_PROVIDER=&quot;&lt;storage provider name&gt;&quot;
export STORAGE_PORT=&quot;&lt;storage provider port - only for minio&gt;&quot;
export STORAGE_PIPELINES_BUCKET=&quot;&lt;pipelines bucket name&gt;&quot;
export STORAGE_TENANTS_BUCKET=&quot;&lt;tenants bucket name&gt;&quot;
export STORAGE_TEMPLATES_BUCKET=&quot;&lt;templates bucket name&gt;&quot;
export WATSONXAI_APIKEY=&quot;&lt;watsonx AI api key&gt;&quot;
export WATSONXAI_URL=&quot;&lt;watsonx AI url&gt;&quot;
export WATSONXAI_PROJECT_ID=&quot;&lt;watsonx AI project ID&gt;&quot;
export DB_HOST=&quot;&lt;database instance host&gt;&quot;
export DB_PORT=&quot;&lt;database instance port&gt;&quot;
export DB_USER=&quot;&lt;database instance user&gt;&quot;
export DB_DATABASE=&quot;&lt;database instance datbase name&gt;&quot;
export DB_SECRET_NAME=&quot;&lt;database instance secret name&gt;&quot;
export DB_SECRET_VALUE=&quot;&lt;database instance password&gt;&quot;

oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/oneclick_add_aibroker.yml
</code></pre>
<h3 id="_1"><a class="headerlink" href="#_1" title="Permanent link"></a></h3>
<h2 id="notice-playbook-oneclick_add_aibrokeryml-will-run-three-roles">NOTICE: playbook oneclick_add_aibroker.yml will run three roles:<a class="headerlink" href="#notice-playbook-oneclick_add_aibrokeryml-will-run-three-roles" title="Permanent link"></a></h2>
<h3 id="role-odh">Role: odh<a class="headerlink" href="#role-odh" title="Permanent link"></a></h3>
<ul>
<li>Install Red Hat OpenShift Serverless Operator</li>
<li>Install Red Hat OpenShift Service Mesh Operator</li>
<li>Install Authorino Operator</li>
<li>Install Open Data Hub Operator</li>
<li>Create DSCInitialization instance</li>
<li>Create Data Science Cluster</li>
<li>Create Create Data Science Pipelines Application</li>
</ul>
<h3 id="role-kmodels">Role: kmodels<a class="headerlink" href="#role-kmodels" title="Permanent link"></a></h3>
<ul>
<li>Install Kmodel controller</li>
<li>Install istio</li>
<li>Install Kmodel store</li>
<li>Install Kmodel watcher</li>
</ul>
<h3 id="role-aibroker">Role: aibroker<a class="headerlink" href="#role-aibroker" title="Permanent link"></a></h3>
<ul>
<li>Install AI Broker api application</li>
<li>Create AI Broker tenant</li>
<li>Create, delete AI Broker API Key</li>
<li>Create, delete AWS S3 API Key</li>
<li>Create, delete WatsonX AI API Key</li>
</ul>
<h2 id="how-to-create-s3">How to create S3<a class="headerlink" href="#how-to-create-s3" title="Permanent link"></a></h2>
<h3 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link"></a></h3>
<ul>
<li>IBM AI Broker Application</li>
</ul>
<h4 id="run-playbooks">Run playbooks<a class="headerlink" href="#run-playbooks" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export STORAGE_ACCESSKEY=&quot;&lt;storage provider access key&gt;&quot;
export STORAGE_SECRETKEY=&quot;&lt;storage provider secret key&gt;&quot;
export STORAGE_HOST=&quot;&lt;storage provider host&gt;&quot;
export STORAGE_REGION=&quot;&lt;storage provider region&gt;&quot;
export S3_ACTION=&quot;install&quot;
export ROLE_NAME=&quot;aibroker&quot;
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml
</code></pre>
<h2 id="how-to-delete-s3">How to delete S3<a class="headerlink" href="#how-to-delete-s3" title="Permanent link"></a></h2>
<h3 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link"></a></h3>
<ul>
<li>S3 created in a cluster</li>
</ul>
<h4 id="run-playbooks_1">Run playbooks<a class="headerlink" href="#run-playbooks_1" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export STORAGE_ACCESSKEY=&quot;&lt;storage provider access key&gt;&quot;
export STORAGE_SECRETKEY=&quot;&lt;storage provider secret key&gt;&quot;
export STORAGE_HOST=&quot;&lt;storage provider host&gt;&quot;
export STORAGE_REGION=&quot;&lt;storage provider region&gt;&quot;
export S3_ACTION=&quot;remove&quot;
export ROLE_NAME=&quot;aibroker&quot;
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml
</code></pre>
<h2 id="how-to-create-api-key">How to create API Key<a class="headerlink" href="#how-to-create-api-key" title="Permanent link"></a></h2>
<h3 id="prerequisites_3">Prerequisites<a class="headerlink" href="#prerequisites_3" title="Permanent link"></a></h3>
<ul>
<li>IBM AI Broker Application</li>
</ul>
<h4 id="run-playbooks_2">Run playbooks<a class="headerlink" href="#run-playbooks_2" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export APIKEY_ACTION=&quot;install&quot;
export ROLE_NAME=&quot;aibroker&quot;
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml
</code></pre>
<h2 id="how-to-delete-api-key">How to delete API Key<a class="headerlink" href="#how-to-delete-api-key" title="Permanent link"></a></h2>
<h3 id="prerequisites_4">Prerequisites<a class="headerlink" href="#prerequisites_4" title="Permanent link"></a></h3>
<ul>
<li>API Key created in a cluster</li>
</ul>
<h4 id="run-playbooks_3">Run playbooks<a class="headerlink" href="#run-playbooks_3" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export APIKEY_ACTION=&quot;remove&quot;
export ROLE_NAME=&quot;aibroker&quot;
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml
</code></pre>
<h2 id="how-to-create-watsonx-api-key">How to create WatsonX API Key<a class="headerlink" href="#how-to-create-watsonx-api-key" title="Permanent link"></a></h2>
<h3 id="prerequisites_5">Prerequisites<a class="headerlink" href="#prerequisites_5" title="Permanent link"></a></h3>
<ul>
<li>IBM AI Broker Application</li>
</ul>
<h4 id="run-playbooks_4">Run playbooks<a class="headerlink" href="#run-playbooks_4" title="Permanent link"></a></h4>
<pre><code class="language-bash">export MAS_INSTANCE_ID=&quot;&lt;instanceId&gt;&quot;
export WATSONX_ACTION=&quot;install&quot;
export ROLE_NAME=&quot;aibroker&quot;
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml
</code></pre>
<h2 id="how-to-watsonx-api-key">How to WatsonX API Key<a class="headerlink" href="#how-to-watsonx-api-key" title="Permanent link"></a></h2>
<h3 id="prerequisites_6">Prerequisites<a class="headerlink" href="#prerequisites_6" title="Permanent link"></a></h3>
<ul>
<li>WatsonX API Key created in a cluster</li>
</ul>
<h4 id="run-playbooks_5">Run playbooks<a class="headerlink" href="#run-playbooks_5" title="Permanent link"></a></h4>
<p>```bash
export MAS_INSTANCE_ID="<instanceId>"
export WATSONX_ACTION="remove"
export ROLE_NAME="aibroker"
oc login --token=xxxx --server=https://myocpserver
ansible-playbook playbooks/run_role.yml</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
