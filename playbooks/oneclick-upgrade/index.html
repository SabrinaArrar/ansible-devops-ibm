<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/playbooks/oneclick-upgrade/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Upgrade - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Upgrade";
        var mkdocs_page_input_path = "playbooks/oneclick-upgrade.md";
        var mkdocs_page_url = "/ansible-devops/playbooks/oneclick-upgrade/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Playbooks</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../ocp/">OCP</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d/">Install Cloud Pak For Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-core/">Install Core</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-iot/">Add IoT</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-manage/">Add Manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-monitor/">Add Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-optimizer/">Add Optimizer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-predict/">Add Predict</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-visualinspection/">Add Visual Inspection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../oneclick-update/">Update</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Upgrade</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#playbook-content">Playbook Content</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#preparation">Preparation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#required-parameters">Required Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#optional-parameters">Optional Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uninstall-core/">Uninstall Core</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: OCP Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_cluster_monitoring/">ocp_cluster_monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_config/">ocp_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_efs/">ocp_efs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_github_oauth/">ocp_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_node_config/">ocp_node_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_provision/">ocp_provision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_roks_upgrade_registry_storage/">ocp_roks_upgrade_registry_storage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_upgrade/">ocp_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_verify/">ocp_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Dependency Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/appconnect/">appconnect</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_bucket_access_point/">aws_bucket_access_point</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_documentdb_user/">aws_documentdb_user</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_policy/">aws_policy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_route53/">aws_route53</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_user_creation/">aws_user_creation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/aws_vpc/">aws_vpc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cert_manager/">cert_manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cis/">cis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/common_services/">common-services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/configure_manage_eventstreams/">configure_manage_eventstreams</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cos/">cos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cos_bucket/">cos_bucket</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_admin_pwd_update/">cp4d_admin_pwd_update</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d/">cp4d</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_service/">cp4d_service</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/db2/">db2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/db2_backup/">db2_backup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/db2_restore/">db2_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/dro/">dro</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/grafana/">grafana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ibm_catalogs/">ibm_catalogs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/kafka/">kafka</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/nvidia_gpu/">nvidia_gpu</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocs/">ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/sls/">sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/turbonomic/">turbonomic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/uds/">uds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Image Mirroring</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_case_prepare/">mirror_case_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_extras_prepare/">mirror_extras_prepare</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_images/">mirror_images</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/mirror_ocp/">mirror_ocp</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_contentsourcepolicy/">ocp_contentsourcepolicy</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_simulate_disconnected_network/">ocp_simulate_disconnected_network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/registry/">registry</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Suite Mgmt</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_config/">suite_app_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_uninstall/">suite_app_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_upgrade/">suite_app_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_rollback/">suite_app_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_certs/">suite_certs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_db2_setup_for_manage/">suite_db2_setup_for_manage</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_attachments_config/">suite_manage_attachments_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_birt_report_config/">suite_manage_birt_report_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_bim_config/">suite_manage_bim_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_customer_files_config/">suite_manage_customer_files_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_import_certs_config/">suite_manage_import_certs_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_load_dbc_scripts/">suite_manage_load_dbc_scripts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_logging_config/">suite_manage_logging_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_manage_pvc_config/">suite_manage_pvc_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_uninstall/">suite_uninstall</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_upgrade/">suite_upgrade</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_rollback/">suite_rollback</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_verify/">suite_verify</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles: Utilities</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/entitlement_key_rotation/">entitlement_key_rotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_watsonstudio/">gencfg_watsonstudio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/install_operator/">install_operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../roles/gencfg_mongo/">gencfg_mongo</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Playbooks</li>
      <li class="breadcrumb-item active">Upgrade</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/playbooks/oneclick-upgrade.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="oneclick-upgrade">OneClick Upgrade<a class="headerlink" href="#oneclick-upgrade" title="Permanent link"></a></h1>
<p>This playbook will <strong>upgrade</strong> the channel subscriptions for IBM Maximo Application Suite on your OpenShift cluster.  Upgrades can only be performed to releases available in the  version of the IBM Maximo Pperator Catalog that is installed in your cluster.  To <strong>update</strong> to a newer version of the operator catalog refer to the <a href="oneclick-update">oneclick-update.md</a> playbook documentation.</p>
<p>The playbook will attempt to upgrade MAS Core and all installed applications.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using the dynamic catalog (<strong>ibm-maximo-operator-catalog:v8</strong>) you will always have access to the latest MAS releases, as you will recieve catalog updates in your cluster as soon as they are released.  Customers using the static catalogs to control the consumption of updates in their cluster will need to ensure that the version of the catalog they have installed supports the version of MAS that they wish to upgrade to.</p>
</div>
<h2 id="playbook-content">Playbook Content<a class="headerlink" href="#playbook-content" title="Permanent link"></a></h2>
<ol>
<li><a href="../../roles/suite_upgrade/">Upgrade MAS Core</a></li>
<li><a href="../../roles/suite_verify/">Verify MAS Core</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Assist)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (HP Utilities)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (IoT)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Manage)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Monitor)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Optimizer)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Predict)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Safety)</a></li>
<li><a href="../../roles/suite_app_upgrade/">Upgrade MAS Application (Visual Inspection)</a></li>
</ol>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link"></a></h2>
<p>If you are using a private/mirror registry it is <strong>critical</strong> that you mirror the images for the new release <strong>before</strong> you run this playbook, otherwise you will see numerous containers in <strong>ImagePullBackoff</strong> as the updates are rolled out automatically after the subscription has been changed, if you have not mirrored the new images the subscription change itself may fail if the operator bundle is not on your private registry.</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link"></a></h2>
<h3 id="required-parameters">Required Parameters<a class="headerlink" href="#required-parameters" title="Permanent link"></a></h3>
<ul>
<li><code>MAS_INSTANCE_ID</code> Set the instance ID of the MAS installation to upgrade</li>
</ul>
<h3 id="optional-parameters">Optional Parameters<a class="headerlink" href="#optional-parameters" title="Permanent link"></a></h3>
<p>If you provide no values for MAS Core or the individual applications, the roles will attempt to upgrade to the next level of MAS and upgrade applications to the latest version supported by the installed version of MAS Core (after upgrading MAS Core).</p>
<ul>
<li><code>MAS_CHANNEL</code> Set the target subscription channel for MAS Core</li>
<li><code>MAS_APP_CHANNEL_ASSIST</code> Set the target subscription channel for Assist</li>
<li><code>MAS_APP_CHANNEL_HPUTILITIES</code> Set the target subscription channel for Health &amp; Predict Utilities</li>
<li><code>MAS_APP_CHANNEL_IOT</code> Set the target subscription channel for IoT</li>
<li><code>MAS_APP_CHANNEL_MONITOR</code> Set the target subscription channel for Monitor</li>
<li><code>MAS_APP_CHANNEL_OPTIMIZER</code> Set the target subscription channel for Optimizer</li>
<li><code>MAS_APP_CHANNEL_PREDICT</code> Set the target subscription channel for Predict</li>
<li><code>MAS_APP_CHANNEL_SAFETY</code> Set the target subscription channel for Safety</li>
<li><code>MAS_APP_CHANNEL_VISUALINSPECTION</code> Set the target subscription channel for Visual Inspection</li>
</ul>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link"></a></h3>
<p>The simplest way to upgrade MAS is to provide only the instance ID that you wish to upgrade, allowing the roles to determine the correct target version each application.</p>
<pre><code class="language-bash">export MAS_INSTANCE_ID=instance1
oc login --token=xxxx --server=https://myocpserver
ansible-playbook ibm.mas_devops.oneclick_upgrade
</code></pre>
<p>You can also explicitly specify the target upgrade:</p>
<pre><code class="language-bash">export MAS_INSTANCE_ID=instance1
export MAS_CHANNEL=8.8.x
export MAS_APP_CHANNEL_IOT=8.5.x
oc login --token=xxxx --server=https://myocpserver
ansible-playbook ibm.mas_devops.oneclick_upgrade
</code></pre>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you do not want to set up all the dependencies on your local system, you can run the update from inside our container image: <code>docker run -ti --rm --pull always quay.io/ibmmas/cli</code></p>
</div>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../oneclick-update/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../uninstall-core/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
